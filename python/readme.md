# GPS Bot Mapper Python Toolkit

This folder contains Python scripts for logging, processing, analyzing, and visualizing GPS path and obstacle data collected from autonomous bots or vehicles. The toolkit is designed to work with CSV data files generated by a navigation and obstacle detection system, such as the Arduino-based system in this project.

---

## Features

- **Serial Data Logging:** Capture real-time GPS and obstacle data from a microcontroller via serial port and save to CSV.
- **Parse and filter GPS path and obstacle data from CSV files.**
- **Estimate obstacle positions using heading and distance.**
- **Visualize bot trajectory and obstacle locations in both absolute (UTM) and relative coordinates.**
- **Generate publication-quality plots for analysis.**

---

## File Overview

- **log_serial_data.py**  
  - Connects to a serial port (default `/dev/ttyACM0`, change as needed for your system).
  - Listens for incoming messages in the format:
    - `PATH,<lat>,<lon>,<heading>`
    - `OBS,<lat>,<lon>,<heading>,<distance>`
  - Writes all received lines to `backup.txt` for redundancy.
  - Saves parsed path data to `path_data.csv` and obstacle data to `obs_data.csv` upon exit (Ctrl+C).

- **plot_map.py**  
  - Reads `path_data.csv` and `obs_data.csv`.
  - Converts all coordinates to UTM (meters) for accurate distance representation.
  - Estimates obstacle positions in UTM coordinates using heading and distance.
  - Plots both:
    - **Absolute trajectory:** Path and obstacles in UTM coordinates (`trajectory_absolute.png`)
    - **Relative trajectory:** Path and obstacles relative to the start point (`trajectory_relative.png`)
  - Visualizes heading directions for both path and obstacles.
  - Draws dotted lines from the bot to each estimated obstacle position.
  - Outputs estimated obstacle positions to `estimated_data.csv`.

---

## Data Format

Both scripts expect or generate the following CSV files:

- **path_data.csv**
  ```
  Latitude,Longitude,Heading
  12.9716,77.5946,90
  12.9717,77.5947,95
  ...
  ```

- **obs_data.csv**
  ```
  Latitude,Longitude,Heading,Distance
  12.9716,77.5946,180,150
  ...
  ```

---

## How It Works

1. **Data Logging:**  
   Run `log_serial_data.py` to capture real-time data from your bot's serial output.  
   - All lines are backed up to `backup.txt`.
   - Path and obstacle data are saved to `path_data.csv` and `obs_data.csv` when you stop the script.

2. **Data Processing & Visualization:**  
   Run `plot_map.py` to:
   - Filter and convert GPS coordinates to UTM.
   - Estimate obstacle positions using heading and distance.
   - Plot the bot's path and obstacles in both absolute and relative coordinates.
   - Save plots as PNG images and estimated obstacle positions as `estimated_data.csv`.

---

## Usage

1. **Install dependencies:**
   ```sh
   pip install numpy matplotlib utm pyserial
   ```

2. **Log data from your bot:**
   - Edit `log_serial_data.py` to use the correct serial port for your system (e.g., `COM3` on Windows).
   - Run:
     ```sh
     python log_serial_data.py
     ```
   - Stop with Ctrl+C when done. This will save `path_data.csv` and `obs_data.csv`.

3. **Visualize and analyze:**
   - Run:
     ```sh
     python plot_map.py
     ```
   - View the generated plots: `trajectory_absolute.png`, `trajectory_relative.png`.
   - Check `estimated_data.csv` for processed obstacle positions.

---

## Example Output

- `trajectory_absolute.png` — Path and obstacles in UTM meters.
- `trajectory_relative.png` — Path and obstacles relative to the start point.
- `estimated_data.csv` — Estimated obstacle positions in UTM coordinates.

---

## Requirements

- Python 3.x
- numpy
- matplotlib
- utm
- pyserial (for serial logging)

---

## Customization

- Adjust plotting parameters (colors, markers, skip intervals) in `plot_map.py` as needed.
- Change the serial port and baud rate in `log_serial_data.py` to match your hardware.
- Extend the scripts to support additional sensors or data fields.

---

## License

MIT License

---